webpackJsonp([1],{"0hA3":function(t,e){},J5Qr:function(t,e){},J8lp:function(t,e,a){t.exports=a.p+"static/img/cover2.5abc065.png"},MEmw:function(t,e,a){t.exports=a.p+"static/img/cover1.eb5473a.png"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("mtWM"),r=a.n(i),o=a("Rf8U"),n=a.n(o),l=(a("K3J8"),a("ZZvs")),c=a.n(l),d=(a("SYh3"),a("sUu7")),u=a("1SbN"),v=a.n(u),p=a("oYt9"),m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var _=a("VU/8")({name:"App"},m,!1,function(t){a("TUA9")},null,null).exports,h=a("/ocq"),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-block"},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.signin(e)}}},[a("h1",{staticClass:"h3 mb-3 font-weight-normal text-center"},[t._v("管理者登入")]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control mb-2",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block mt-3",attrs:{type:"submit"}},[t._v("登入帳號")]),t._v(" "),a("div",{staticClass:"text-right mt-3"},[a("router-link",{attrs:{to:"/"}},[t._v("\r\n          返回首頁")])],1)])])},staticRenderFns:[]};var g=a("VU/8")({data:function(){return{user:{username:"",password:""}}},methods:{signin:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/admin/signin",t.user).then(function(e){e.data.success&&t.$router.push("/admin/products")})}}},f,!1,function(t){a("Z0zH")},"data-v-4f0546a2",null).exports,C=a("woOf"),b=a.n(C),y=a("7t+N"),x=a.n(y),w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:!t.pages.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){e.preventDefault(),t.updatePage(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),t._l(t.pages.total_pages,function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pages.current_page==e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.updatePage(e)}}},[t._v(t._s(e))])])}),t._v(" "),a("li",{staticClass:"page-item",class:{disabled:!t.pages.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){e.preventDefault(),t.updatePage(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)])])},staticRenderFns:[]},$=a("VU/8")({props:["pages"],methods:{updatePage:function(t){this.$emit("emitPages",t)}}},w,!1,null,null,null).exports,P={data:function(){return{products:[],tempProduct:{},pagination:{},isNew:!1,isLoading:!1,status:{fileUploading:!1}}},components:{Pagination:$},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/alvin/admin/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),e=this;e.isLoading=!0,this.$http.get(t).then(function(t){e.isLoading=!1,e.products=t.data.products,e.pagination=t.data.pagination})},editModal:function(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=b()({},e),this.isNew=!1),x()("#editModal").modal("show")},deleteModal:function(t){this.tempProduct=b()({},t),x()("#deleteModal").modal("show")},updateProduct:function(){var t="https://vue-course-api.hexschool.io/api/alvin/admin/product",e="post",a=this;a.isNew||(t="https://vue-course-api.hexschool.io/api/alvin/admin/product/"+a.tempProduct.id,e="put"),this.$http[e](t,{data:a.tempProduct}).then(function(t){t.data.success,x()("#editModal").modal("hide"),a.getProducts()})},deleteProduct:function(){var t=this,e="https://vue-course-api.hexschool.io/api/alvin/admin/product/"+t.tempProduct.id;this.$http.delete(e).then(function(){x()("#deleteModal").modal("hide"),t.getProducts()})},uploadFile:function(){var t=this,e=this.$refs.files.files[0],a=this,s=new FormData;s.append("file-to-upload",e);a.status.fileUploading=!0,this.$http.post("https://vue-course-api.hexschool.io/api/alvin/admin/upload",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a.status.fileUploading=!1,e.data.success?a.$set(a.tempProduct,"imageUrl",e.data.imageUrl):t.$bus.$emit("message:push",e.data.message,"danger")})}},created:function(){this.getProducts()}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"text-right mt-4"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.editModal(!0)}}},[t._v("建立新的產品")])]),t._v(" "),a("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),a("tbody",t._l(t.products,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.category))]),t._v(" "),a("td",[t._v(t._s(e.title))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.origin_price)))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.price)))]),t._v(" "),a("td",[e.is_enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){t.editModal(!1,e)}}},[t._v("編輯")]),t._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){t.deleteModal(e)}}},[t._v("刪除")])])])}))]),t._v(" "),a("Pagination",{attrs:{pages:t.pagination},on:{emitPages:t.getProducts}}),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"editModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片\r\n                    "),t.status.fileUploading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),t._v(" "),a("input",{ref:"files",staticClass:"form-comtrol",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),t._v(" "),a("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"unit"}},[t._v("單位")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"text",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{id:"content",placeholder:"請輸入說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(e){var a=t.tempProduct.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var r=t._i(a,null);s.checked?r<0&&t.$set(t.tempProduct,"is_enabled",a.concat([null])):r>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[t._v("\r\n            是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。\r\n          ")]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"120"}},[t._v("分類")]),t._v(" "),a("th",[t._v("產品名稱")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("原價")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("售價")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v("是否啟用")]),t._v(" "),a("th",{attrs:{width:"130"}},[t._v("編輯")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("新增產品")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:""}},[this._v("刪除產品")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},L=a("VU/8")(P,k,!1,null,null,null).exports,E={data:function(){return{coupons:[],tempCoupon:{},pagination:{},isNew:!1,isLoading:!1}},methods:{getCoupons:function(){var t="https://vue-course-api.hexschool.io/api/alvin/admin/coupons?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),e=this;e.isLoading=!0,this.$http.get(t).then(function(t){e.isLoading=!1,e.coupons=t.data.coupons,e.pagination=t.data.pagination})},editCouponModal:function(t,e){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=b()({},e),this.isNew=!1),x()("#editCouponModal").modal("show")},deleteCouponModal:function(t){this.tempCoupon=b()({},t),x()("#deleteCouponModal").modal("show")},updateCoupon:function(){var t="https://vue-course-api.hexschool.io/api/alvin/admin/coupon",e="post",a=this;a.isNew||(t="https://vue-course-api.hexschool.io/api/alvin/admin/coupon/"+a.tempCoupon.id,e="put"),this.$http[e](t,{data:a.tempCoupon}).then(function(t){t.data.success,x()("#editCouponModal").modal("hide"),a.getCoupons()})},deleteCoupon:function(){var t=this,e="https://vue-course-api.hexschool.io/api/alvin/admin/coupon/"+t.tempCoupon.id;t.isLoading=!0,this.$http.delete(e).then(function(){t.isLoading=!1,x()("#deleteCouponModal").modal("hide"),t.getCoupons()})}},created:function(){this.getCoupons()}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"text-right mt-4"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.editCouponModal(!0)}}},[t._v("建立新的優惠卷")])]),t._v(" "),a("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),a("tbody",t._l(t.coupons,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),t._v(" "),a("td",[t._v(t._s(e.code))]),t._v(" "),a("td",[t._v(t._s(e.percent)+"% ")]),t._v(" "),a("td",[t._v(t._s(e.due_date))]),t._v(" "),a("td",[e.is_enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){t.editCouponModal(!1,e)}}},[t._v("編輯")]),t._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){t.deleteCouponModal(e)}}},[t._v("刪除")])])])}))]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"editCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"promo_code"}},[t._v("優惠碼")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"promo_code",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"due_date"}},[t._v("到期日")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.due_date,expression:"tempCoupon.due_date"}],staticClass:"form-control",attrs:{type:"date",id:"due_date",placeholder:""},domProps:{value:t.tempCoupon.due_date},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"due_date",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"percent",placeholder:"ex: 10"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(e){var a=t.tempCoupon.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var r=t._i(a,null);s.checked?r<0&&t.$set(t.tempCoupon,"is_enabled",a.concat([null])):r>-1&&t.$set(t.tempCoupon,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempCoupon,"is_enabled",i)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"deleteCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[t._v("\r\n            是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 優惠卷(刪除後將無法恢復)。\r\n          ")]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteCoupon}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("產品名稱")]),t._v(" "),a("th",[t._v("優惠碼")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("折扣百分比")]),t._v(" "),a("th",{attrs:{width:"120"}},[t._v("到期日")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v("是否啟用")]),t._v(" "),a("th",{attrs:{width:"130"}},[t._v("編輯")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[this._v("新增優惠卷")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:""}},[this._v("刪除 Coupon")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},I=a("VU/8")(E,N,!1,null,null,null).exports,M={data:function(){return{orders:[],pagination:{},isLoading:!1}},methods:{getOrders:function(){var t="https://vue-course-api.hexschool.io/api/alvin/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),e=this;e.isLoading=!0,this.$http.get(t).then(function(t){e.isLoading=!1,e.orders=t.data.orders,e.pagination=t.data.pagination})}},computed:{sortOrder:function(){var t=[];return this.orders.length&&(t=this.orders.sort(function(t,e){var a=t.is_paid?1:0;return(e.is_paid?1:0)-a})),t}},created:function(){this.getOrders()}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),a("tbody",[t.orders.length?t._l(t.sortOrder,function(e,s){return a("tr",{key:s,staticClass:"{'text-secondary': !item.is_paid}"},[a("td",[t._v(t._s(t._f("date")(e.create_at)))]),t._v(" "),a("td",[e.user?a("span",{domProps:{textContent:t._s(e.user.email)}}):t._e()]),t._v(" "),a("td",[a("ul",{staticClass:"list-unstyled"},t._l(e.products,function(e,s){return a("li",{key:s},[t._v("\r\n                  "+t._s(e.product.title)+" ，期限："+t._s(e.qty)+"\r\n                  "+t._s(e.product.unit)+"\r\n                ")])}))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.total)))]),t._v(" "),a("td",[e.is_paid?a("strong",{staticClass:"text-success"},[t._v("已付款")]):a("span",{staticClass:"text-muted"},[t._v("尚未付款")])])])}):t._e()],2)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("購買時間")]),t._v(" "),a("th",[t._v("Email")]),t._v(" "),a("th",[t._v("購買款項")]),t._v(" "),a("th",[t._v("應付金額")]),t._v(" "),a("th",[t._v("是否付款")])])])}]},S=a("VU/8")(M,U,!1,null,null,null).exports,F={data:function(){return{products:[],product:{},cart:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},pagination:{},status:{loadingItem:""},coupon_code:"",isLoading:!1}},components:{Pagination:$},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/alvin/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),e=this;e.isLoading=!0,this.$http.get(t).then(function(t){e.isLoading=!1,e.products=t.data.products,e.pagination=t.data.pagination})},getProduct:function(t){var e="https://vue-course-api.hexschool.io/api/alvin/product/"+t,a=this;a.status.loadingItem=t,this.$http.get(e).then(function(t){a.product=t.data.product,x()("#productModal").modal("show"),a.status.loadingItem=""})},addtoCart:function(t){var e=this,a={product_id:t,qty:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1};e.status.loadingItem=t,this.$http.post("https://vue-course-api.hexschool.io/api/alvin/cart",{data:a}).then(function(){e.getCart(),x()("#productModal").modal("hide"),e.status.loadingItem=""})},getCart:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/alvin/cart").then(function(e){t.cart=e.data.data,t.isLoading=!1})},removeCartItem:function(t){var e="https://vue-course-api.hexschool.io/api/alvin/cart/"+t,a=this;a.isLoading=!0,this.$http.delete(e).then(function(){a.getCart(),a.isLoading=!1})},addCouponCode:function(){var t=this,e={code:t.coupon_code};t.isLoading=!0,this.$http.post("https://vue-course-api.hexschool.io/api/alvin/coupon",{data:e}).then(function(){t.getCart(),t.isLoading=!1})},createOrder:function(){var t=this,e=this,a=e.form;this.$validator.validate().then(function(s){s&&t.$http.post("https://vue-course-api.hexschool.io/api/alvin/order",{data:a}).then(function(t){t.data.success&&e.$router.push("/admin/customer_checkout/"+t.data.orderId)})})}},created:function(){this.getProducts(),this.getCart()}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"row mt-4"},t._l(t.products,function(e){return a("div",{key:e.id,staticClass:"col-md-4 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm"},[a("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.imageUrl+")"}}),t._v(" "),a("div",{staticClass:"card-body"},[a("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))]),t._v(" "),a("h3",{staticClass:"card-title"},[a("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(e.title))])]),t._v(" "),a("p",{staticClass:"card-text"},[t._v(t._s(e.content))]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e.price?t._e():a("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(e.origin_price))+" 元")]),t._v(" "),e.price?a("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(e.origin_price))+" 元")]):t._e(),t._v(" "),e.price?a("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(e.price))+" 元")]):t._e()])]),t._v(" "),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){t.getProduct(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\r\n              查看更多\r\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){t.addtoCart(e.id)}}},[a("i",{staticClass:"fas fa-spinner fa-spin"}),t._v("\r\n              加到購物車\r\n            ")])])])])})),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),t._v(" "),a("blockquote",{staticClass:"blockquote mt-3"},[a("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),t._v(" "),a("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.price?t._e():a("div",{staticClass:"h4"},[t._v(t._s(t.product.origin_price)+" 元")]),t._v(" "),t.product.price?a("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t._v(" "),t.product.price?a("div",{staticClass:"h4"},[t._v("現在只要 "+t._s(t.product.price)+" 元")]):t._e()]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"num",e.target.multiple?a:a[0])}}},t._l(10,function(e){return a("option",{key:e,domProps:{value:e}},[t._v("\r\n                選購 "+t._s(e)+" "+t._s(t.product.unit)+"\r\n              ")])}))]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\r\n              小計 "),a("strong",[t._v(t._s(t.product.num*t.product.price))]),t._v(" 元\r\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.addtoCart(t.product.id,t.product.num)}}},[t.product.id===t.status.loadingItem?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\r\n              加到購物車\r\n            ")])])])])]),t._v(" "),a("div",{staticClass:"my-5 row justify-content-center"},[a("div",{staticClass:"col-md-6"},[a("table",{staticClass:"table"},[t._m(1),t._v(" "),a("tbody",[t.cart.carts?t._l(t.cart.carts,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){t.removeCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\r\n                  "+t._s(e.product.title)+"\r\n                  "),e.coupon?a("div",{staticClass:"text-success"},[t._v("\r\n                    已套用優惠券\r\n                  ")]):t._e()]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),t._v(" "),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])}):t._e()],2),t._v(" "),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.cart.total))])]),t._v(" "),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),t._v(" "),a("td",{staticClass:"text-right text-success"},[t._v(t._s(t.cart.final_total))])]):t._e()])]),t._v(" "),a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("\r\n              套用優惠碼\r\n            ")])])])])]),t._v(" "),a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t._v(" "),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v("\r\n            "+t._s(t.errors.first("email"))+"\r\n          ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t._v(" "),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t._v(" "),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usermessage"}},[t._v("留言")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"usermessage",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._v(" "),t._m(2)])]),t._v(" "),a("Pagination",{attrs:{pages:t.pagination},on:{emitPages:t.getProducts}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th"),this._v(" "),e("th",[this._v("品名")]),this._v(" "),e("th",[this._v("數量")]),this._v(" "),e("th",[this._v("單價")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger"},[this._v("送出訂單")])])}]},V=a("VU/8")(F,q,!1,null,null,null).exports,A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.order.products,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),t._v(" "),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])})),t._v(" "),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])]),t._v(" "),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"100"}},[t._v("Email")]),t._v(" "),a("td",[t._v(t._s(t.order.user.email))])]),t._v(" "),a("tr",[a("th",[t._v("姓名")]),t._v(" "),a("td",[t._v(t._s(t.order.user.name))])]),t._v(" "),a("tr",[a("th",[t._v("收件人電話")]),t._v(" "),a("td",[t._v(t._s(t.order.user.tel))])]),t._v(" "),a("tr",[a("th",[t._v("收件人地址")]),t._v(" "),a("td",[t._v(t._s(t.order.user.address))])]),t._v(" "),a("tr",[a("th",[t._v("付款狀態")]),t._v(" "),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),t._v(" "),!1===t.order.is_paid?a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("品名")]),this._v(" "),e("th",[this._v("數量")]),this._v(" "),e("th",[this._v("單價")])])}]},D=a("VU/8")({data:function(){return{orderId:"",order:{user:{}}}},methods:{getOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/alvin/order/"+t.orderId;t.isLoading=!0,this.$http.get(e).then(function(e){t.order=e.data.order,t.isLoading=!1})},payOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/alvin/pay/"+t.orderId;t.isLoading=!0,this.$http.post(e).then(function(e){e.data.success&&t.getOrder(),t.isLoading=!1})}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},A,!1,null,null,null).exports,R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-light bg-primary fixed-top"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("JKTV 經典韓日劇-後台管理")]),t._v(" "),a("ul",{staticClass:"navbar-nav px-3"},[a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"btn btn-outline-dark",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signout(e)}}},[t._v("登出")])])])])])},staticRenderFns:[]},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[e("div",{staticClass:"sidebar-sticky"},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[e("i",{staticClass:"fas fa-shopping-cart mr-1"}),this._v(" 產品列表\r\n            ")])],1),this._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/order_list"}},[e("i",{staticClass:"fas fa-file-alt mr-1"}),this._v(" 訂單列表\r\n            ")])],1),this._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupon"}},[e("i",{staticClass:"fas fa-ticket-alt mr-1"}),this._v(" 優惠卷\r\n            ")])],1)])])])])},staticRenderFns:[]},j={name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout(function(){e.messages.forEach(function(a,s){a.timestamp===t&&e.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("message:push",function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";console.log("bus"),t.updateMessage(e,a)})}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v("\r\n      "+t._s(e.message)+"\r\n      "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}))},staticRenderFns:[]};var J={components:{Navbar:a("VU/8")({methods:{signout:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/logout").then(function(e){e.data.success&&t.$router.push("/login")})}}},R,!1,null,null,null).exports,Sidebar:a("VU/8")({},O,!1,null,null,null).exports,Alert:a("VU/8")(j,T,!1,function(t){a("duVY")},null,null).exports}},z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Alert"),this._v(" "),e("Navbar"),this._v(" "),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("Sidebar"),this._v(" "),e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4",attrs:{role:"main"}},[e("router-view")],1)],1)])],1)},staticRenderFns:[]},G=a("VU/8")(J,z,!1,null,null,null).exports,B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-light bg-primary fixed-top"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"container"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("JKTV 經典韓日劇")]),t._v(" "),a("router-link",{staticClass:"btn btn-outline-dark",attrs:{to:"/login"}},[t._v("後台管理")])],1)],1)},staticRenderFns:[]},H=a("VU/8")({data:function(){return{isLoading:!1}}},B,!1,null,null,null).exports,W={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticStyle:{"background-color":"#a1cefa"}},[e("div",{staticClass:"container text-center py-3"},[e("p",[this._v("Copyright 2019 © JKTV 經典韓日劇 by Chengji")]),this._v(" "),e("p",[this._v("練習作品，無商業用途")])])])}]},Y=a("VU/8")(null,W,!1,null,null,null).exports,K={data:function(){return{cart:{},isShow:!1,isLoading:!1}},components:{Navbar:H,Footer:Y},methods:{getCart:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/alvin/cart").then(function(e){t.cart=e.data.data})},removeCartItem:function(t){var e="https://vue-course-api.hexschool.io/api/alvin/cart/"+t,a=this;a.isLoading=!0,this.$http.delete(e).then(function(){a.getCart(),a.isLoading=!1})}},created:function(){this.getCart(),this.$bus.$on("emitGetCart",this.getCart)}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),t._v(" "),a("router-view"),t._v(" "),a("Footer"),t._v(" "),a("section",{staticClass:"cart",attrs:{title:"購物車"}},[a("div",{staticClass:"cart-btn",on:{click:function(e){t.isShow=!t.isShow}}},[a("span",[a("i",{staticClass:"fas fa-shopping-cart cart-icon"}),t._v(" "),this.cart.carts&&this.cart.carts.length>0?a("span",{staticClass:"cart-num"},[t._v("\r\n            "+t._s(t.cart.carts.length)+"\r\n          ")]):t._e()])]),t._v(" "),t.isShow?a("div",{staticClass:"cart-box"},[a("div",{staticClass:"row justify-content-center bg-light border rounded py-3"},[a("div",{staticClass:"col-md-12"},[a("h3",{staticClass:"h5"},[t._v("已選擇商品")]),t._v(" "),a("div",{staticClass:"cart-close",on:{click:function(e){t.isShow=!1}}},[a("span"),t._v(" "),a("span")]),t._v(" "),a("table",{staticClass:"table table-sm my-0"},[a("tbody",[0==t.cart.total?a("tr",[t._v("購物車還沒有東西哦！")]):t._e(),t._v(" "),t._l(t.cart.carts,function(e,s){return a("tr",{key:s},[a("td",[a("button",{staticClass:"btn bg-transparent btn-sm d-none d-md-block",attrs:{type:"button"},on:{click:function(a){t.removeCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),a("td",{staticClass:"text-info cart-title"},[t._v(t._s(e.product.title))]),t._v(" "),a("td",[t._v(t._s(e.qty)+t._s(e.product.unit))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.final_total)))])])})],2)]),t._v(" "),0!==t.cart.total?a("router-link",{staticClass:"nav-item text-white",attrs:{to:"/carts/checkout_order"}},[a("button",{staticClass:"btn btn-danger d-block mx-auto w-100",attrs:{type:"button"},on:{click:function(e){t.isShow=!t.isShow}}},[t._v("結帳去")])]):t._e(),t._v(" "),0==t.cart.total?a("button",{staticClass:"btn btn-info d-block text-white mx-auto w-100 mt-2",attrs:{type:"button"},on:{click:function(e){t.isShow=!t.isShow}}},[t._v("繼續購物")]):t._e()],1)])]):t._e()])],1)},staticRenderFns:[]},Q=a("VU/8")(K,Z,!1,null,null,null).exports,X={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-jumbotron"},[s("div",{staticClass:"container"},[s("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleIndicators","data-ride":"carousel"}},[s("ol",{staticClass:"carousel-indicators"},[s("li",{staticClass:"active",attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"0"}}),t._v(" "),s("li",{attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"1"}}),t._v(" "),s("li",{attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"2"}})]),t._v(" "),s("div",{staticClass:"carousel-inner"},[s("div",{staticClass:"carousel-item active"},[s("img",{staticClass:"d-block w-100",attrs:{src:a("MEmw"),alt:"First slide"}})]),t._v(" "),s("div",{staticClass:"carousel-item"},[s("img",{staticClass:"d-block w-100",attrs:{src:a("J8lp"),alt:"Second slide"}})]),t._v(" "),s("div",{staticClass:"carousel-item"},[s("img",{staticClass:"d-block w-100",attrs:{src:a("ba+C"),alt:"Third slide"}})])]),t._v(" "),s("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"prev"}},[s("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Previous")])]),t._v(" "),s("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"next"}},[s("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Next")])])])])])}]};var tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"list-group sticky-top mb-5",staticStyle:{top:"80px"}},[a("a",{staticClass:"list-group-item list-group-item-action",class:{active:"all"===t.category},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.updateCategory("all")}}},[t._v("\r\n      全部\r\n    ")]),t._v(" "),a("a",{staticClass:"list-group-item list-group-item-action",class:{active:"經典日劇"===t.category},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.updateCategory("經典日劇")}}},[t._v("\r\n      經典日劇系列\r\n    ")]),t._v(" "),a("a",{staticClass:"list-group-item list-group-item-action",class:{active:"口碑韓劇"===t.category},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.updateCategory("口碑韓劇")}}},[t._v("\r\n      口碑韓劇系列\r\n    ")])])},staticRenderFns:[]},et={data:function(){return{products:[],allProducts:[],pagination:{},isLoading:!1,category:"all"}},components:{Jumbotron:a("VU/8")(null,X,!1,function(t){a("z8a8")},"data-v-07563116",null).exports,Sidebar:a("VU/8")({data:function(){return{category:"all"}},methods:{updateCategory:function(t){this.category=t,this.$emit("emitCategory",t)}}},tt,!1,null,null,null).exports,Pagination:$},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/alvin/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),e=this;e.isLoading=!0,this.$http.get(t).then(function(t){e.isLoading=!1,e.products=t.data.products,e.pagination=t.data.pagination})},getAllProduct:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/alvin/products/all").then(function(e){t.allProducts=e.data.products})},addtoCart:function(t){var e=this,a={product_id:t,qty:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1};e.$http.post("https://vue-course-api.hexschool.io/api/alvin/cart",{data:a}).then(function(){e.$swal({title:"已加入購物車",type:"success",showConfirmButton:!1,timer:2e3}),e.$bus.$emit("emitGetCart")})},showIntroduction:function(t){this.$router.push("/product/"+t)},switchCategory:function(t){this.category=t}},computed:{filterData:function(){var t=this;return"all"===t.category?t.products:t.allProducts.filter(function(e){return e.category.match(t.category)})}},created:function(){this.getProducts(),this.getAllProduct(),localStorage.setItem("step",1)}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"mt-5"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("Jumbotron"),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"container my-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("Sidebar",{on:{emitCategory:t.switchCategory}})],1),t._v(" "),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane active"},[a("div",{staticClass:"row"},t._l(t.filterData,function(e){return a("div",{key:e.id,staticClass:"col-md-6 mb-4"},[a("div",{staticClass:"card box-shadow border-0 h-100"},[a("div",{staticStyle:{height:"200px","background-size":"cover","background-position":"50% 30%"},style:{backgroundImage:"url("+e.imageUrl+")"}}),t._v(" "),a("div",{staticClass:"card-body"},[a("span",{staticClass:"badge badge-info"},[t._v("\r\n                        "+t._s(e.category)+"\r\n                      ")]),t._v(" "),a("h3",{staticClass:"card-title"},[a("router-link",{staticClass:"text-dark",attrs:{to:"/product/"+e.id}},[t._v("\r\n                          "+t._s(e.title)+"\r\n                        ")])],1),t._v(" "),a("p",{staticClass:"card-text-truncate"},[t._v(t._s(e.content))]),t._v(" "),a("del",{staticClass:"p-origin-price"},[t._v(t._s(t._f("currency")(e.origin_price)))]),t._v(" "),a("p",{staticClass:"h4 card-text mr-3 p-price"},[t._v(" "+t._s(t._f("currency")(e.price))+" ")])]),t._v(" "),a("div",{staticClass:"card-footer d-flex border-top-0 bg-white mb-2"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){t.showIntroduction(e.id)}}},[t._v("\r\n                        影片介紹\r\n                      ")]),t._v(" "),a("button",{staticClass:"btn btn-outline-primary ml-auto",attrs:{type:"button"},on:{click:function(a){t.addtoCart(e.id)}}},[t._v("\r\n                        加到購物車\r\n                      ")])])])])})),t._v(" "),a("Pagination",{directives:[{name:"show",rawName:"v-show",value:"all"==t.category,expression:"category == 'all'"}],attrs:{pages:t.pagination},on:{emitPages:t.getProducts}})],1)])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container mt-3"},[e("p",{staticClass:"text-center bg-warning py-3"},[this._v("2019/5/15 前，使用優惠碼「welcome」，購物可享 9 折優惠。")])])}]};var st=a("VU/8")(et,at,!1,function(t){a("0hA3")},"data-v-a36c27de",null).exports,it={data:function(){return{itemId:"",product:{},isLoading:!1}},methods:{getProduct:function(){var t=this,e="https://vue-course-api.hexschool.io/api/alvin/product/"+t.itemId;t.isLoading=!0,t.$http.get(e).then(function(e){t.product=e.data.product,t.$set(t.product,"num",0),t.isLoading=!1})},addtoCart:function(t){var e=this,a={product_id:t,qty:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1};e.$http.post("https://vue-course-api.hexschool.io/api/alvin/cart",{data:a}).then(function(){e.$swal({title:"已加入購物車",type:"success",showConfirmButton:!1,timer:2e3}),e.$bus.$emit("emitGetCart")})}},created:function(){this.itemId=this.$route.params.itemId,this.getProduct()}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticStyle:{"padding-top":"65px"}},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"container mt-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:t.product.title}})]),t._v(" "),a("div",{staticClass:"col-md-6 my-4"},[a("h1",{staticClass:"h2"},[t._v(t._s(t.product.title))]),t._v(" "),a("hr"),t._v(" "),a("span",{staticClass:"badge badge-info"},[t._v("\r\n            "+t._s(t.product.category)+"\r\n          ")]),t._v(" "),a("p",{staticClass:"mt-2"},[t._v(t._s(t.product.description))]),t._v(" "),a("div",{staticClass:"my-3"},[a("del",{staticClass:"p-origin-price"},[t._v(t._s(t._f("currency")(t.product.origin_price)))]),t._v(" "),a("p",{staticClass:"h4 p-price"},[t._v(" "+t._s(t._f("currency")(t.product.price))+" ")])]),t._v(" "),a("div",{staticClass:"input-group"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mb-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"num",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",selected:"",disabled:""}},[t._v("請選擇訂閱期限")]),t._v(" "),t._l(10,function(e){return a("option",{key:e,domProps:{value:e}},[t._v("\r\n                    訂閱 "+t._s(e)+" "+t._s(t.product.unit)+"\r\n                  ")])})],2)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"btn btn-primary btn-block",on:{click:function(e){e.preventDefault(),t.addtoCart(t.product.id,t.product.num)}}},[a("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}}),t._v(" 加入購物車\r\n                ")])])])])])]),t._v(" "),a("div",{staticClass:"row justify-content-center my-4"},[a("div",{staticClass:"col-md-8"},[a("h2",{staticClass:"text-center"},[t._v("劇情簡介")]),t._v(" "),a("p",[t._v(t._s(t.product.content))]),t._v(" "),a("div",{staticClass:"my-4"},[a("router-link",{staticClass:"btn btn-info",attrs:{to:"/"}},[t._v("\r\n              << 我要繼續逛")])],1)])])])],1)},staticRenderFns:[]},ot=a("VU/8")(it,rt,!1,null,null,null).exports,nt={data:function(){return{step:1,cartData:{},isLoading:!1}},components:{Navbar:H,Footer:Y},methods:{getCar:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/alvin/cart").then(function(e){t.cartData=e.data.data,t.isLoading=!1})},setDefaultStep:function(){var t=localStorage.getItem("step")||1;this.step=Number(t)},updateStep:function(t){this.step=t,localStorage.setItem("step",t)}},created:function(){var t=this;document.body.scrollTop=0,document.documentElement.scrollTop=0,t.getCar(),t.setDefaultStep(),t.$bus.$on("step:update",function(e){t.updateStep(e)})}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("Navbar"),t._v(" "),a("div",{staticClass:"container",staticStyle:{"padding-top":"65px"}},[a("section",{staticClass:"row justify-content-center my-3"},[a("div",{staticClass:"col-md-10"},[a("h1",{staticClass:"text-center mb-3"},[t._v("購物車")]),t._v(" "),a("div",{staticClass:"row justify-content-center text-center"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"alert alert-rounded mb-0",class:{"alert-success":1==t.step,"alert-light":1!==t.step},attrs:{role:"alert"}},[t._v("\r\n                1.填寫訂單資料\r\n              ")])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"alert alert-rounded mb-0",class:{"alert-success":2==t.step,"alert-light":2!==t.step},attrs:{role:"alert"}},[t._v("\r\n                2.確認付款\r\n              ")])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"alert alert-rounded mb-0",class:{"alert-success":3==t.step,"alert-light":3!==t.step},attrs:{role:"alert"}},[t._v("\r\n                3.完成訂單！\r\n              ")])])])])]),t._v(" "),a("router-view",{attrs:{cart:t.cartData},on:{emitGetCar:t.getCar}})],1),t._v(" "),a("Footer")],1)},staticRenderFns:[]},ct=a("VU/8")(nt,lt,!1,null,null,null).exports,dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"my-3 row justify-content-center"},[a("form",{staticClass:"col-md-8",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("h2",{staticClass:"text-center h3"},[t._v("訂購人資訊")]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t._v(" "),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",id:"usertel",name:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t._v(" "),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t._v(" "),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v("\r\n          "+t._s(t.errors.first("email"))+"\r\n        ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("留言")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between mt-3"},[a("router-link",{staticClass:"btn btn-info d-inline-block",attrs:{to:"/"}},[t._v("<< 繼續購物")]),t._v(" "),a("button",{staticClass:"btn btn-danger"},[t._v("送出訂單")])],1)])])},staticRenderFns:[]},ut={props:["cart"],data:function(){return{step:1,coupon_code:"",isLoading:!1}},components:{CustomerInformation:a("VU/8")({props:["cart"],data:function(){return{coupon_code:"",form:{user:{name:"",email:"",tel:""},message:""},step:2}},methods:{createOrder:function(){var t=this,e=this,a=e.form;this.$validator.validate().then(function(s){s&&t.$http.post("https://vue-course-api.hexschool.io/api/alvin/order",{data:a}).then(function(t){t.data.success&&(e.$bus.$emit("step:update",2),e.$router.push("/carts/confirm_payment/"+t.data.orderId))})})}}},dt,!1,null,null,null).exports},methods:{removeCartItem:function(t){var e=this,a="https://vue-course-api.hexschool.io/api/alvin/cart/"+t;e.isLoading=!0,this.$http.delete(a).then(function(){e.$emit("emitGetCar"),e.isLoading=!1})},addCouponCode:function(){var t=this,e={code:t.coupon_code};this.$http.post("https://vue-course-api.hexschool.io/api/alvin/coupon",{data:e}).then(function(e){if(e.data.success)t.$swal({title:e.data.message,type:"success",showConfirmButton:!1,timer:2e3}),t.$emit("emitGetCar");else{var a=e.data.message;t.$swal({title:a,type:"error",showConfirmButton:!1,timer:2e3})}t.coupon_code=""})}},computed:{isCartEmpty:function(){return!(!this.cart.carts||0!==this.cart.carts.length)}}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("section",{staticClass:"row justify-content-center my-5"},[a("div",{staticClass:"col-md-8"},[a("h2",{staticClass:"text-center h3"},[t._v("訂單資訊")]),t._v(" "),a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",[t.cart.carts?t._l(t.cart.carts,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle text-center"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){t.removeCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\r\n                  "+t._s(e.product.title)+"\r\n                  "),e.coupon?a("div",{staticClass:"text-success"},[t._v("\r\n                    已套用優惠券\r\n                  ")]):t._e()]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+t._s(e.product.unit))]),t._v(" "),a("td",{staticClass:"align-middle text-right"},[a("span",{class:{"line-through":e.coupon}},[t._v("\r\n                    "+t._s(t._f("currency")(e.total))+"\r\n                  ")]),t._v(" "),e.coupon?a("div",{staticClass:"text-success mt-0"},[t._v("\r\n                    "+t._s(t._f("currency")(e.final_total))+"\r\n                  ")]):t._e()])])}):t._e()],2),t._v(" "),t.isCartEmpty?t._e():a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t._v(" "),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),t._v(" "),a("td",{staticClass:"text-right text-success"},[t._v(t._s(t.cart.final_total))])]):t._e()])]),t._v(" "),t.isCartEmpty?a("div",{staticClass:"text-center mt-2"},[a("i",{staticClass:"fa fa-shopping-cart fa-5",attrs:{"aria-hidden":"true"}}),t._v(" "),a("h3",{staticClass:"h5 font-weight-bold"},[t._v("你的購物車是空的")]),t._v(" "),a("p",[t._v("記得加入商品到你的購物車")]),t._v(" "),a("router-link",{staticClass:"btn btn-info d-inline-block",attrs:{to:"/"}},[t._v("繼續購物")])],1):t._e(),t._v(" "),t.isCartEmpty?t._e():a("div",{staticClass:"input-group mb-2 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("\r\n              套用優惠碼\r\n            ")])])])])]),t._v(" "),t.isCartEmpty?t._e():a("CustomerInformation")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th"),this._v(" "),e("th",[this._v("品名")]),this._v(" "),e("th",{attrs:{width:"80"}},[this._v("期限")]),this._v(" "),e("th",{staticClass:"text-right",attrs:{width:"80"}},[this._v("售價")])])}]};var pt=a("VU/8")(ut,vt,!1,function(t){a("uJv+")},"data-v-2c583870",null).exports,mt={data:function(){return{orderId:"",order:{user:{}},isLoading:!1}},methods:{getOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/alvin/order/"+t.orderId;t.isLoading=!0,this.$http.get(e).then(function(e){t.order=e.data.order,t.isLoading=!1})},payOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/alvin/pay/"+t.orderId;t.isLoading=!0,this.$http.post(e).then(function(e){e.data.success&&(t.isLoading=!1,t.$bus.$emit("step:update",3),t.setdefaultScroll(),t.getOrder())})},setdefaultScroll:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},created:function(){this.setdefaultScroll(),this.orderId=this.$route.params.orderId,this.getOrder()}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"my-5 row justify-content-center"},[t.order.is_paid?a("div",{staticClass:"mb-5"},[a("i",{staticClass:"far fa-check-circle text-primary text-center"}),t._v(" "),a("p",{staticClass:"h5 font-weight-bold"},[t._v("謝謝你，你的訂單已經成立")])]):t._e(),t._v(" "),a("h2",{staticClass:"text-center h3 col-12 mb-4"},[t._v("訂單資訊")]),t._v(" "),a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.order.products,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+" "+t._s(e.product.unit))]),t._v(" "),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(e.final_total)))])])})),t._v(" "),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),t._v(" "),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"120"}},[t._v("顧客姓名")]),t._v(" "),a("td",[t._v(t._s(t.order.user.name))])]),t._v(" "),a("tr",[a("th",[t._v("顧客電話")]),t._v(" "),a("td",[t._v(t._s(t.order.user.tel))])]),t._v(" "),a("tr",[a("th",[t._v("顧客 Email")]),t._v(" "),a("td",[t._v(t._s(t.order.user.email))])]),t._v(" "),a("tr",[a("th",[t._v("付款狀態")]),t._v(" "),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",{staticClass:"text-danger"},[t._v("尚未付款")])])])])]),t._v(" "),a("div",{staticClass:"text-right"},[t.order.is_paid?a("router-link",{staticClass:"btn btn-info d-inline-block",attrs:{to:"/"}},[t._v("回購物首頁")]):a("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("商名名稱")]),this._v(" "),e("th",[this._v("期限")]),this._v(" "),e("th",{staticClass:"text-right"},[this._v("價格")])])}]};var ht=a("VU/8")(mt,_t,!1,function(t){a("J5Qr")},"data-v-2337eba8",null).exports;s.a.use(h.a);var ft=new h.a({routes:[{path:"*",redirect:"/"},{path:"/login",name:"Login",component:g},{path:"/admin",name:"Dashboard",component:G,children:[{path:"products",name:"Products",component:L,meta:{requiresAuth:!0}},{path:"order_list",name:"OrderList",component:S,meta:{requiresAuth:!0}},{path:"coupon",name:"Coupon",component:I,meta:{requiresAuth:!0}},{path:"customer_orders",name:"CustomerOrders",component:V},{path:"customer_checkout/:orderId",name:"CustomerCheckout",component:D}]},{path:"/",name:"Home",component:Q,children:[{path:"",name:"Shop",component:st},{path:"product/:itemId",name:"Product",component:ot}]},{path:"/carts",name:"Carts",component:ct,children:[{path:"checkout_order",name:"CheckoutOrder",component:pt},{path:"confirm_payment/:orderId",name:"ConfirmPayment",component:ht,props:!0}]}]});s.a.prototype.$bus=new s.a;s.a.config.productionTip=!1,s.a.use(n.a,r.a),s.a.use(d.a),d.a.Validator.localize("zh_TW",v.a),s.a.use(p.a),s.a.component("Loading",c.a),s.a.filter("currency",function(t){return"$"+Number(t).toFixed(0).replace(/./g,function(t,e,a){return e&&"."!==t&&(a.length-e)%3==0?(", "+t).replace(/\s/g,""):t})}),s.a.filter("date",function(t){return new Date(1e3*t).toLocaleDateString()}),r.a.defaults.withCredentials=!0,new s.a({el:"#app",router:ft,components:{App:_},template:"<App/>"}),ft.beforeEach(function(t,e,a){if(t.meta.requiresAuth){r.a.post("https://vue-course-api.hexschool.io/api/user/check").then(function(t){t.data.success?a():a({path:"/login"})})}else a()})},SYh3:function(t,e){},TUA9:function(t,e){},UdIB:function(t,e){},Z0zH:function(t,e){},"ba+C":function(t,e,a){t.exports=a.p+"static/img/cover3.7044fe5.png"},duVY:function(t,e){},"uJv+":function(t,e){},z8a8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a5b262ad6c09e44750fb.js.map